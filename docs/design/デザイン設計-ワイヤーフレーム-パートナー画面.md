
```
┌─────────────────────────────────────────────────────────────┐
│ HATAMO Logo              [Messages] [Notifications] [田中]  │
├─────────────────────────────────────────────────────────────┤
│ [Dashboard] [Services] [Bookings] [Messages] [Revenue]       │
├─────────────────────────────────────────────────────────────┤
│                                                               │
│  ダッシュボード                                               │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━      │
│                                                               │
│  ┌───────────┬───────────┬───────────┬───────────┐          │
│  │今月の売上  │新規申込   │進行中     │完了       │          │
│  │¥350,000   │5件        │3件        │12件       │          │
│  │+12%↑      │+2件       │          │          │          │
│  └───────────┴───────────┴───────────┴───────────┘          │
│                                                               │
│  ┌─────────────────────────────────────────────────────────┐│
│  │ 新規申込（要対応）                         [すべて見る] ││
│  ├─────────────────────────────────────────────────────────┤│
│  │ Service         Client      Status       Amount   Action││
│  │─────────────────────────────────────────────────────────││
│  │ Webサイト制作   佐藤花子    PENDING      ¥50,000  [確認]││
│  │ SEOコンサル     山田一郎    PENDING      ¥30,000  [確認]││
│  │ ロゴデザイン     鈴木次郎    PENDING      ¥20,000  [確認]││
│  └─────────────────────────────────────────────────────────┘│
│                                                               │
│  ┌─────────────────────────────────────────────────────────┐│
│  │ 進行中のサービス                           [すべて見る] ││
│  ├─────────────────────────────────────────────────────────┤│
│  │ Service         Client      Status       Progress  Action││
│  │─────────────────────────────────────────────────────────││
│  │ LP制作          田中太郎    IN_PROGRESS  [====  ] [詳細]││
│  │ 広告運用        伊藤美咲    IN_PROGRESS  [======] [詳細]││
│  │ 動画編集        高橋健一    IN_PROGRESS  [==    ] [詳細]││
│  └─────────────────────────────────────────────────────────┘│
│                                                               │
│  ┌────────────────────┬────────────────────────────────────┐│
│  │ 売上推移           │  サービス別売上                    ││
│  │ [グラフ]           │  ┌──────────────────────────────┐ ││
│  │                    │  │ Webサイト制作: ¥200,000 (57%) │ ││
│  │                    │  │ SEOコンサル:    ¥100,000 (29%) │ ││
│  │                    │  │ ロゴデザイン:    ¥50,000 (14%) │ ││
│  │                    │  └──────────────────────────────┘ ││
│  └────────────────────┴────────────────────────────────────┘│
│                                                               │
├─────────────────────────────────────────────────────────────┤
│ Footer: About | Terms | Privacy | Contact                    │
└─────────────────────────────────────────────────────────────┘
```

**要素説明**:
- トップナビゲーション: メニュー（ダッシュボード、サービス、申込、メッセージ、売上）
- 統計カード: 今月の売上、新規申込、進行中、完了（前月比表示）
- 新規申込テーブル: サービス名、クライアント、ステータス、金額、アクション
- 進行中のサービステーブル: プログレスバー表示
- グラフエリア: 売上推移グラフ、サービス別売上円グラフ

### 5.6 管理者ダッシュボード

```
┌─────────────────────────────────────────────────────────────┐
│ HATAMO Admin                                    [管理者名]   │
├─────────────────────────────────────────────────────────────┤
│ [Dashboard] [Codes] [Members] [Services] [Bookings] [...]    │
├─────────────────────────────────────────────────────────────┤
│                                                               │
│  管理者ダッシュボード                                         │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━      │
│                                                               │
│  ┌─────────┬─────────┬─────────┬─────────┬─────────┐        │
│  │総会員数  │利用者   │パートナー│総申込   │総売上   │        │
│  │48名      │32名     │16名      │156件    │¥5.2M    │        │
│  │+3↑       │+2↑      │+1↑       │+12↑     │+8%↑     │        │
│  └─────────┴─────────┴─────────┴─────────┴─────────┘        │
│                                                               │
│  ┌─────────────────────────────────────────────────────────┐│
│  │ 最近のアクティビティ                       [すべて見る] ││
│  ├─────────────────────────────────────────────────────────┤│
│  │ • 佐藤花子さんが新規登録しました（利用者） 5分前        ││
│  │ • 田中太郎さんが「Webサイト制作」を登録 15分前          ││
│  │ • 新規申込: 山田一郎 → 鈴木次郎（SEOコンサル） 1時間前 ││
│  │ • 伊藤美咲さんが招待コードを使用 2時間前               ││
│  │ • 高橋健一さんが売上¥50,000を確定 3時間前              ││
│  └─────────────────────────────────────────────────────────┘│
│                                                               │
│  ┌────────────────────┬────────────────────────────────────┐│
│  │ 要対応事項         │  システムアラート                  ││
│  ├────────────────────┼────────────────────────────────────┤│
│  │ ⚠ 未承認サービス   │  ⚠ 不適切メッセージ検出: 1件       ││
│  │   3件              │  ⚠ 返金リクエスト: 1件             ││
│  │                    │  ✓ システム正常稼働                ││
│  │ ⚠ 問題報告         │  ✓ DB接続正常                      ││
│  │   1件              │  ✓ 決済API正常                     ││
│  │                    │                                    ││
│  │ ⚠ 精算待ち         │                                    ││
│  │   5件              │                                    ││
│  └────────────────────┴────────────────────────────────────┘│
│                                                               │
│  ┌─────────────────────────────────────────────────────────┐│
│  │ クイックアクション                                      ││
│  ├─────────────────────────────────────────────────────────┤│
│  │ [招待コード生成] [メンバー管理] [サービス承認]          ││
│  │ [申込管理] [精算処理] [レポート生成]                    ││
│  └─────────────────────────────────────────────────────────┘│
│                                                               │
├─────────────────────────────────────────────────────────────┤
│ Footer: System Info | Version 1.0 | © 2025 HATAMO            │
└─────────────────────────────────────────────────────────────┘
```

**要素説明**:
- 統計カード: 総会員数、利用者、パートナー、総申込、総売上（増減表示）
- アクティビティフィード: 最近のシステムイベント
- 要対応事項: 未承認サービス、問題報告、精算待ち（件数バッジ）
- システムアラート: 異常検出、ステータス表示
- クイックアクション: 主要機能への即時アクセス

### 5.7 パートナー向けサービス一覧（マイサービス）

```
┌─────────────────────────────────────────────────────────────┐
│ HATAMO Logo              [Messages] [Notifications] [田中]  │
├─────────────────────────────────────────────────────────────┤
│ [Dashboard] [Services] [Bookings] [Messages] [Revenue]       │
├─────────────────────────────────────────────────────────────┤
│                                                               │
│  マイサービス                                                 │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━      │
│                                                               │
│  ┌────────────┬────────────┬────────────┬────────────┐       │
│  │総サービス数│公開中      │非公開      │総申込数    │       │
│  │8件         │6件         │2件         │42件        │       │
│  │            │            │            │            │       │
│  └────────────┴────────────┴────────────┴────────────┘       │
│                                                               │
│  ┌──────────────────────────────┐  [+ 新規サービス作成]      │
│  │ 🔍 [サービス名で検索...]     │                            │
│  └──────────────────────────────┘                            │
│                                                               │
│  ┌────────────┬──────────────┬──────────────┐               │
│  │[すべて ▼]  │[カテゴリ ▼] │[並び替え ▼] │               │
│  │            │              │              │               │
│  └────────────┴──────────────┴──────────────┘               │
│                                                               │
│  ┌─────────────────────────────────────────────────────────┐│
│  │ サービス一覧テーブル                                    ││
│  ├─────────────────────────────────────────────────────────┤│
│  │ 画像    タイトル     カテゴリ  価格     手数料率 ステータス 申込 評価 アクション││
│  │─────────────────────────────────────────────────────────││
│  │ [IMG] Webサイト制作  IT開発   ¥50,000  30%     [公開中] 12件 ★4.8 [...] ││
│  │       コーポレート                                                     ││
│  │       サイト構築...                                                    ││
│  │                                                                       ││
│  │ [IMG] SEOコンサル    マーケ   ¥30,000  20%     [公開中]  8件 ★4.5 [...] ││
│  │       検索順位改善                                                     ││
│  │       支援サービス                                                     ││
│  │                                                                       ││
│  │ [IMG] ロゴデザイン   IT開発   ¥20,000  40%     [公開中]  5件 ★4.9 [...] ││
│  │       企業ブランド                                                     ││
│  │       ロゴ制作                                                         ││
│  │                                                                       ││
│  │ [IMG] LP制作         IT開発   ¥40,000  30%     [公開中]  7件 ★4.6 [...] ││
│  │       ランディング                                                     ││
│  │       ページ構築                                                       ││
│  │                                                                       ││
│  │ [IMG] 広告運用代行   マーケ   ¥80,000  50%     [公開中] 10件 ★4.7 [...] ││
│  │       Google Ads                                                      ││
│  │       運用サポート                                                     ││
│  │                                                                       ││
│  │ [IMG] 動画編集       IT開発   ¥35,000  30%     [非公開]  0件  -   [...] ││
│  │       プロモーション                                                   ││
│  │       動画制作                                                         ││
│  │                                                                       ││
│  │ [IMG] 経営コンサル   コンサル ¥100,000 50%     [非公開]  0件  -   [...] ││
│  │       事業戦略策定                                                     ││
│  │       支援                                                             ││
│  │                                                                       ││
│  │ [IMG] SNS運用        マーケ   ¥25,000  20%     [公開中]  0件  -   [...] ││
│  │       Instagram                                                       ││
│  │       運用代行                                                         ││
│  │                                                                       ││
│  └─────────────────────────────────────────────────────────┘│
│                                                               │
│  [< Prev] [1] [2] [3] ... [Next >]                           │
│                                                               │
├─────────────────────────────────────────────────────────────┤
│ Footer: About | Terms | Privacy | Contact                    │
└─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────┐
│ アクションドロップダウン（...）     │
├─────────────────────────────────────┤
│ 👁 プレビュー                        │
│ ✏️ 編集                              │
│ 🔄 公開/非公開切り替え              │
│ ──────────────────────────────────  │
│ 🗑 削除                              │
└─────────────────────────────────────┘
```

**要素説明**:

#### ヘッダーエリア
- **ページタイトル**: 「マイサービス」
- **統計カード** (4つ):
  - 総サービス数: 登録したすべてのサービス数
  - 公開中: `isActive = true` のサービス数
  - 非公開: `isActive = false` のサービス数
  - 総申込数: 全サービスの累積申込数（Bookingテーブルから集計）

#### アクションエリア
- **新規サービス作成ボタン**: プライマリボタン（右上配置）
  - クリックで `/sponsor/services/new` へ遷移

#### 検索・フィルターバー
- **検索ボックス**:
  - プレースホルダー: 「サービス名で検索...」
  - 入力時にリアルタイム検索（debounce 300ms）

- **ステータスフィルター**:
  - オプション: すべて / 公開中 / 非公開
  - デフォルト: すべて

- **カテゴリフィルター**:
  - オプション: すべて / IT開発 / コンサルティング / マーケティング / くらし / 投資
  - ServiceCategory enumに対応

- **並び替えドロップダウン**:
  - オプション:
    - 更新日（新しい順）- デフォルト
    - 更新日（古い順）
    - 作成日（新しい順）
    - 作成日（古い順）
    - 申込数（多い順）
    - 申込数（少ない順）
    - 評価（高い順）
    - 評価（低い順）
    - 価格（高い順）
    - 価格（低い順）

#### サービス一覧テーブル

**テーブル列定義**:

| 列名 | 幅 | データ | 説明 |
|------|-----|-------|------|
| 画像 | 80px | `imageUrl` | サービスのサムネイル画像（正方形、角丸） |
| タイトル | 250px | `title`, `description` | タイトル（太字）+ 説明の先頭2行（グレー、小さめ） |
| カテゴリ | 100px | `category` | カテゴリバッジ表示 |
| 価格 | 100px | `price` | ¥形式で表示（カンマ区切り） |
| 手数料率 | 80px | `feeRate` | 20%/30%/40%/50%表示 |
| ステータス | 100px | `isActive` | バッジ表示（公開中=緑、非公開=グレー） |
| 申込 | 60px | Bookingテーブルから集計 | 申込数（件） |
| 評価 | 80px | Reviewテーブルから集計 | ★4.8形式（申込0件は「-」表示） |
| アクション | 60px | - | ドロップダウンメニュー（...アイコン） |

**アクションドロップダウンメニュー**:
- **プレビュー**: 利用者目線でのサービス詳細画面を新しいタブで表示
- **編集**: `/sponsor/services/:id/edit` へ遷移
- **公開/非公開切り替え**:
  - 公開中 → 非公開: 確認ダイアログ表示後、`isActive = false`に更新
  - 非公開 → 公開中: 確認ダイアログ表示後、`isActive = true`に更新
- **削除**:
  - 確認ダイアログ表示（「申込が紐づいている場合は削除できません」警告）
  - 削除条件: 紐づくBookingが0件の場合のみ
  - 削除実行後、トースト通知表示

#### ページネーション
- 1ページあたり10件表示
- 総ページ数を計算して表示
- 前へ/次へボタン + ページ番号リンク

#### 空の状態（サービス未登録時）
```
┌─────────────────────────────────────┐
│                                     │
│         📦                          │
│                                     │
│   まだサービスが登録されていません   │
│                                     │
│   サービスを登録して、               │
│   利用者からの申込を受け付けましょう │
│                                     │
│   [+ 新規サービス作成]              │
│                                     │
└─────────────────────────────────────┘
```

#### データ構造

**サービス一覧API (`GET /api/sponsor/services`)**

**リクエストパラメータ**:
```typescript
interface GetServicesParams {
  page?: number;          // ページ番号（デフォルト: 1）
  limit?: number;         // 1ページあたりの件数（デフォルト: 10）
  search?: string;        // サービス名検索（部分一致）
  status?: 'all' | 'active' | 'inactive';  // ステータスフィルター
  category?: ServiceCategory | 'all';      // カテゴリフィルター
  sortBy?: 'updatedAt' | 'createdAt' | 'bookings' | 'rating' | 'price';
  sortOrder?: 'asc' | 'desc';
}
```

**レスポンス**:
```typescript
interface GetServicesResponse {
  services: ServiceWithStats[];
  pagination: {
    total: number;        // 総件数
    page: number;         // 現在のページ
    limit: number;        // 1ページあたりの件数
    totalPages: number;   // 総ページ数
  };
  stats: {
    total: number;        // 総サービス数
    active: number;       // 公開中
    inactive: number;     // 非公開
    totalBookings: number; // 総申込数
  };
}

interface ServiceWithStats {
  id: string;
  title: string;
  description: string;
  category: ServiceCategory;
  price: number;
  feeRate: FeeRate;
  isActive: boolean;
  imageUrl: string | null;
  createdAt: Date;
  updatedAt: Date;
  bookingCount: number;     // 申込数
  averageRating: number | null;  // 平均評価（レビュー0件の場合はnull）
  reviewCount: number;      // レビュー数
}
```

**公開/非公開切り替えAPI (`PATCH /api/sponsor/services/:id/toggle-active`)**

**リクエスト**:
```typescript
// ボディなし（現在の isActive を反転）
```

**レスポンス**:
```typescript
interface ToggleActiveResponse {
  success: boolean;
  service: {
    id: string;
    isActive: boolean;
  };
  message: string;  // 「サービスを公開しました」または「サービスを非公開にしました」
}
```

**削除API (`DELETE /api/sponsor/services/:id`)**

**レスポンス**:
```typescript
interface DeleteServiceResponse {
  success: boolean;
  message: string;  // 「サービスを削除しました」
}

// エラーレスポンス（申込がある場合）
interface DeleteServiceError {
  success: false;
  error: string;  // 「このサービスには申込が紐づいているため削除できません」
}
```

#### UIコンポーネント

**使用するshadcn/uiコンポーネント**:
- `Card`: 統計カード
- `Button`: 新規作成、アクションボタン
- `Input`: 検索ボックス
- `Select`: フィルター、並び替えドロップダウン
- `Table`: サービス一覧
- `Badge`: ステータス、カテゴリ表示
- `DropdownMenu`: アクションメニュー
- `AlertDialog`: 削除、公開切り替えの確認ダイアログ
- `Toast`: 操作完了通知
- `Skeleton`: ローディング状態

#### インタラクション仕様

1. **検索**:
   - 入力時にdebounce（300ms）
   - 検索中はテーブルにSkeletonを表示
   - 結果0件の場合は空の状態メッセージ表示

2. **フィルター・並び替え**:
   - 変更時に即座にAPIリクエスト
   - ローディング中はテーブルにSkeletonを表示

3. **公開/非公開切り替え**:
   - クリック → 確認ダイアログ表示
   - 確認 → APIリクエスト → 成功時にトースト通知 + テーブル再読み込み

4. **削除**:
   - クリック → 確認ダイアログ表示
   - ダイアログ内容: 「本当にこのサービスを削除しますか？この操作は取り消せません。」
   - 確認 → APIリクエスト
   - 成功: トースト通知「サービスを削除しました」+ テーブル再読み込み
   - 失敗: エラートースト表示「このサービスには申込が紐づいているため削除できません」

5. **プレビュー**:
   - 新しいタブで `/client/services/:id` を開く（利用者視点）

#### レスポンシブ対応

**モバイル（〜768px）**:
- テーブルをカード形式に変換
- 各サービスをカードとして縦積み表示
- カード内容: 画像、タイトル、カテゴリ、価格、ステータス、アクションボタン
- フィルター・並び替えはシート（Sheet）で開閉

**タブレット（768px〜1024px）**:
- テーブル表示維持
- 一部列を非表示（説明、手数料率を省略）

**デスクトップ（1024px〜）**:
- 全列表示

### 5.8 利用者向けマイ申込一覧（Bookings）

```
┌─────────────────────────────────────────────────────────────┐
│ HATAMO Logo              Search Box               [Profile] │
├─────────────────────────────────────────────────────────────┤
│ [ダッシュボード] [サービス] [申込] [メッセージ] [プロフィール]│
├─────────────────────────────────────────────────────────────┤
│                                                               │
│  マイ申込                                                     │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━      │
│                                                               │
│  ┌───────────┬───────────┬───────────┬───────────┐          │
│  │全申込     │進行中     │完了       │キャンセル │          │
│  │12件       │3件        │8件        │1件        │          │
│  │           │⚠要対応    │           │           │          │
│  └───────────┴───────────┴───────────┴───────────┘          │
│                                                               │
│  ┌──────────────────────────────┐                            │
│  │ 🔍 [サービス名・パートナー名で検索...]                   │
│  └──────────────────────────────┘                            │
│                                                               │
│  ┌────────────┬──────────────┬──────────────┐               │
│  │[ステータス▼]│[カテゴリ ▼] │[並び替え ▼] │               │
│  │            │              │              │               │
│  └────────────┴──────────────┴──────────────┘               │
│                                                               │
│  ┌─────────────────────────────────────────────────────────┐│
│  │ 申込一覧                                                ││
│  ├─────────────────────────────────────────────────────────┤│
│  │ サービス       パートナー   ステータス  金額     申込日  アクション││
│  │─────────────────────────────────────────────────────────││
│  │ [IMG] Webサイト 田中太郎    [進行中]   ¥50,000  10/01  [詳細] [メッセージ]││
│  │       制作      ★★★★☆                                  ││
│  │                                                         ││
│  │ [IMG] SEOコンサル 佐藤花子  [完了]     ¥30,000  09/28  [詳細] [レビュー]││
│  │                 ★★★★★                                  ││
│  │                                                         ││
│  │ [IMG] ロゴデザイン 山田一郎  [承認待ち] ¥20,000  09/25  [詳細] [決済]││
│  │                   ★★★★☆                                ││
│  │                                                         ││
│  │ [IMG] LP制作     鈴木次郎   [申込中]   ¥40,000  09/20  [詳細] [キャンセル]││
│  │                 ★★★★★                                  ││
│  │                                                         ││
│  └─────────────────────────────────────────────────────────┘│
│                                                               │
│  [< Prev] [1] [2] [3] ... [Next >]                           │
│                                                               │
├─────────────────────────────────────────────────────────────┤
│ Footer: About | Terms | Privacy | Contact                    │
└─────────────────────────────────────────────────────────────┘
```

**要素説明**:

#### ヘッダーエリア
- **ページタイトル**: 「マイ申込」
- **統計カード** (4つ):
  - 全申込: すべてのBooking数
  - 進行中: `ACCEPTED`, `PAID`, `IN_PROGRESS` の合計（要対応バッジ付き）
  - 完了: `COMPLETED` 状態のBooking数
  - キャンセル: `CANCELLED`, `REFUNDED` の合計

#### 検索・フィルターバー

- **検索ボックス**:
  - プレースホルダー: 「サービス名・パートナー名で検索...」
  - 入力時にリアルタイム検索（debounce 300ms）
  - Service.title、Sponsor.nameで検索

- **ステータスフィルター**:
  - オプション:
    - すべて（デフォルト）
    - 申込中（PENDING）
    - 承認待ち（ACCEPTED）- 決済が必要
    - 決済済み（PAID）
    - 進行中（IN_PROGRESS）
    - 完了（COMPLETED）
    - キャンセル（CANCELLED, REFUNDED）

- **カテゴリフィルター**:
  - オプション: すべて / IT開発 / コンサルティング / マーケティング / くらし / 投資
  - ServiceCategory enumに対応

- **並び替えドロップダウン**:
  - オプション:
    - 申込日（新しい順）- デフォルト
    - 申込日（古い順）
    - 更新日（新しい順）
    - 更新日（古い順）
    - 金額（高い順）
    - 金額（低い順）

#### 申込一覧テーブル

**テーブル列定義**:

| 列名 | 幅 | データ | 説明 |
|------|-----|-------|------|
| サービス | 250px | `Service.imageUrl`, `Service.title` | サムネイル画像 + サービスタイトル |
| パートナー | 150px | `Sponsor.name`, 平均評価 | パートナー名 + 星評価 |
| ステータス | 120px | `status` | ステータスバッジ（色分け） |
| 金額 | 100px | `totalPrice` | ¥形式で表示（カンマ区切り） |
| 申込日 | 100px | `createdAt` | MM/DD形式 |
| アクション | 180px | - | ステータスに応じたアクションボタン |

**ステータスバッジの色分け**:

| ステータス | バッジ色 | テキスト |
|-----------|---------|---------|
| PENDING | 黄色（yellow-100/yellow-800） | 申込中 |
| ACCEPTED | オレンジ（orange-100/orange-800） | 承認待ち |
| PAID | 青（blue-100/blue-800） | 決済済み |
| IN_PROGRESS | 紫（purple-100/purple-800） | 進行中 |
| COMPLETED | 緑（green-100/green-800） | 完了 |
| CANCELLED | グレー（gray-100/gray-800） | キャンセル |
| REFUNDED | グレー（gray-100/gray-800） | 返金済み |

**ステータス別アクション**:

| ステータス | アクションボタン | 動作 |
|-----------|----------------|------|
| PENDING | [詳細] [キャンセル] | 詳細表示、キャンセル確認ダイアログ |
| ACCEPTED | [詳細] [決済へ進む] | 詳細表示、決済画面へ遷移 |
| PAID | [詳細] [メッセージ] | 詳細表示、メッセージ画面へ遷移 |
| IN_PROGRESS | [詳細] [メッセージ] | 詳細表示、メッセージ画面へ遷移 |
| COMPLETED | [詳細] [レビュー] | 詳細表示、レビュー投稿画面へ遷移（未投稿の場合のみ） |
| CANCELLED/REFUNDED | [詳細] | 詳細表示のみ |

#### ページネーション
- 1ページあたり10件表示
- 総ページ数を計算して表示
- 前へ/次へボタン + ページ番号リンク

#### 空の状態（申込未登録時）
```
┌─────────────────────────────────────┐
│                                     │
│         📋                          │
│                                     │
│   まだ申込がありません               │
│                                     │
│   気になるサービスを見つけて、       │
│   申し込んでみましょう               │
│                                     │
│   [サービスを探す]                  │
│                                     │
└─────────────────────────────────────┘
```

#### データ構造

**申込一覧API (`GET /api/client/bookings`)**

**リクエストパラメータ**:
```typescript
interface GetBookingsParams {
  page?: number;          // ページ番号（デフォルト: 1）
  limit?: number;         // 1ページあたりの件数（デフォルト: 10）
  search?: string;        // サービス名・パートナー名検索（部分一致）
  status?: BookingStatus | 'all';  // ステータスフィルター
  category?: ServiceCategory | 'all';  // カテゴリフィルター
  sortBy?: 'createdAt' | 'updatedAt' | 'totalPrice';
  sortOrder?: 'asc' | 'desc';
}
```

**レスポンス**:
```typescript
interface GetBookingsResponse {
  bookings: BookingWithDetails[];
  pagination: {
    total: number;        // 総件数
    page: number;         // 現在のページ
    limit: number;        // 1ページあたりの件数
    totalPages: number;   // 総ページ数
  };
  stats: {
    total: number;        // 全申込数
    inProgress: number;   // 進行中（ACCEPTED, PAID, IN_PROGRESS）
    completed: number;    // 完了（COMPLETED）
    cancelled: number;    // キャンセル（CANCELLED, REFUNDED）
  };
}

interface BookingWithDetails {
  id: string;
  status: BookingStatus;
  totalPrice: number;
  createdAt: Date;
  updatedAt: Date;
  completedAt: Date | null;
  service: {
    id: string;
    title: string;
    category: ServiceCategory;
    imageUrl: string | null;
  };
  sponsor: {
    id: string;
    name: string;
    profileImage: string | null;
    averageRating: number | null;
  };
  hasReview: boolean;  // レビュー投稿済みかどうか
}
```

**キャンセルAPI (`POST /api/client/bookings/:id/cancel`)**

**リクエスト**:
```typescript
interface CancelBookingRequest {
  reason?: string;  // キャンセル理由（任意、最大500文字）
}
```

**レスポンス**:
```typescript
interface CancelBookingResponse {
  success: boolean;
  booking: {
    id: string;
    status: BookingStatus;  // CANCELLED
  };
  message: string;  // 「申込をキャンセルしました」
}

// エラーレスポンス（キャンセル不可の場合）
interface CancelBookingError {
  success: false;
  error: string;  // 「この申込はキャンセルできません（決済済み）」
}
```

**キャンセル可能条件**:
- ステータスが `PENDING` または `ACCEPTED` の場合のみ
- `PAID` 以降は返金処理が必要なため別フロー

#### UIコンポーネント

**使用するshadcn/uiコンポーネント**:
- `Card`: 統計カード
- `Button`: アクションボタン
- `Input`: 検索ボックス
- `Select`: フィルター、並び替えドロップダウン
- `Table`: 申込一覧
- `Badge`: ステータス表示
- `AlertDialog`: キャンセル確認ダイアログ
- `Toast`: 操作完了通知
- `Skeleton`: ローディング状態
- `Avatar`: パートナーアバター

#### インタラクション仕様

1. **検索**:
   - 入力時にdebounce（300ms）
   - 検索中はテーブルにSkeletonを表示
   - 結果0件の場合は空の状態メッセージ表示

2. **フィルター・並び替え**:
   - 変更時に即座にAPIリクエスト
   - ローディング中はテーブルにSkeletonを表示

3. **キャンセル**:
   - クリック → 確認ダイアログ表示
   - ダイアログ内容: 「この申込をキャンセルしますか？」+ キャンセル理由入力欄（任意）
   - 確認 → APIリクエスト
   - 成功: トースト通知「申込をキャンセルしました」+ テーブル再読み込み
   - 失敗: エラートースト表示

4. **決済へ進む**:
   - `/client/bookings/:id/payment` へ遷移
   - Stripe決済画面表示

5. **レビュー投稿**:
   - `/client/bookings/:id/review` へ遷移
   - レビュー投稿フォーム表示

6. **詳細表示**:
   - `/client/bookings/:id` へ遷移
   - 申込詳細画面表示（5.10参照）

#### レスポンシブ対応

**モバイル（〜768px）**:
- テーブルをカード形式に変換
- 各申込をカードとして縦積み表示
- カード内容: サービス画像、タイトル、パートナー名、ステータス、金額、アクションボタン
- フィルター・並び替えはシート（Sheet）で開閉

**タブレット（768px〜1024px）**:
- テーブル表示維持
- 一部列を非表示（パートナー評価を省略）

**デスクトップ（1024px〜）**:
- 全列表示

---

### 5.9 パートナー向け申込管理（Bookings）

**画面の役割**:
- **ダッシュボードトップとの違い**:
  - **ダッシュボード（/sponsor/dashboard）**: 最新の申込状況を一目で把握（最新5件程度表示）+ クイックアクション
  - **申込管理タブ（/sponsor/bookings）**: 全申込の詳細管理・検索・フィルタリング機能
- **導線**: ダッシュボードの「新規申込」「進行中のサービス」セクションにある「すべて見る」ボタンからこの画面へ遷移

**用途**:
- 全申込の一覧表示と詳細管理
- ステータス別・サービス別フィルタリング
- 高度な検索機能（クライアント名・サービス名）
- 過去の申込履歴の確認
- 申込件数が増えた場合のスケーラブルな管理

```
┌─────────────────────────────────────────────────────────────┐
│ HATAMO Logo              [Messages] [Notifications] [田中]  │
├─────────────────────────────────────────────────────────────┤
│ [Dashboard] [Services] [Bookings] [Messages] [Revenue]       │
├─────────────────────────────────────────────────────────────┤
│                                                               │
│  申込管理                                                     │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━      │
│                                                               │
│  ┌───────────┬───────────┬───────────┬───────────┐          │
│  │全申込     │承認待ち   │進行中     │完了       │          │
│  │25件       │3件 ⚠     │8件        │12件       │          │
│  │           │要対応     │           │           │          │
│  └───────────┴───────────┴───────────┴───────────┘          │
│                                                               │
│  ┌──────────────────────────────┐                            │
│  │ 🔍 [クライアント名・サービス名で検索...]                 │
│  └──────────────────────────────┘                            │
│                                                               │
│  ┌────────────┬──────────────┬──────────────┐               │
│  │[ステータス▼]│[サービス ▼] │[並び替え ▼] │               │
│  │            │              │              │               │
│  └────────────┴──────────────┴──────────────┘               │
│                                                               │
│  ┌─────────────────────────────────────────────────────────┐│
│  │ 申込一覧                                                ││
│  ├─────────────────────────────────────────────────────────┤│
│  │ サービス     クライアント ステータス  金額/受取額  申込日  アクション││
│  │─────────────────────────────────────────────────────────││
│  │ Webサイト制作 [🧑]佐藤花子  [承認待ち] ¥50,000    10/01  [承認] [拒否]││
│  │                                        ↓¥32,500           [詳細]││
│  │                                                         ││
│  │ SEOコンサル   [🧑]山田一郎  [進行中]   ¥30,000    09/28  [完了マーク]││
│  │                                        ↓¥21,000           [詳細]││
│  │                                                         ││
│  │ ロゴデザイン  [🧑]鈴木次郎  [決済済み] ¥20,000    09/25  [作業開始]││
│  │                                        ↓¥10,000           [詳細]││
│  │                                                         ││
│  │ LP制作        [🧑]田中太郎  [完了]     ¥40,000    09/20  [詳細]││
│  │                                        ↓¥26,000           [レビュー]││
│  │                                                         ││
│  └─────────────────────────────────────────────────────────┘│
│                                                               │
│  [< Prev] [1] [2] [3] ... [Next >]                           │
│                                                               │
├─────────────────────────────────────────────────────────────┤
│ Footer: About | Terms | Privacy | Contact                    │
└─────────────────────────────────────────────────────────────┘
```

**要素説明**:

#### ヘッダーエリア
- **ページタイトル**: 「申込管理」
- **統計カード** (4つ):
  - 全申込: すべての受信Booking数
  - 承認待ち: `PENDING` 状態のBooking数（⚠要対応バッジ付き）
  - 進行中: `ACCEPTED`, `PAID`, `IN_PROGRESS` の合計
  - 完了: `COMPLETED` 状態のBooking数

#### 検索・フィルターバー

- **検索ボックス**:
  - プレースホルダー: 「クライアント名・サービス名で検索...」
  - 入力時にリアルタイム検索（debounce 300ms）
  - Client.name、Service.titleで検索

- **ステータスフィルター**:
  - オプション:
    - すべて（デフォルト）
    - 承認待ち（PENDING）- 最重要
    - 承認済み（ACCEPTED）
    - 決済済み（PAID）
    - 進行中（IN_PROGRESS）
    - 完了確認待ち（AWAITING_COMPLETION）- 新規追加
    - 完了（COMPLETED）
    - 拒否・キャンセル（CANCELLED, REFUNDED）

- **サービスフィルター**:
  - オプション: 自分が提供しているサービスのリスト
  - 「すべてのサービス」がデフォルト

- **並び替えドロップダウン**:
  - オプション:
    - 申込日（新しい順）- デフォルト
    - 申込日（古い順）
    - 更新日（新しい順）
    - 更新日（古い順）
    - 金額（高い順）
    - 金額（低い順）

#### 申込一覧テーブル

**テーブル列定義**:

| 列名 | 幅 | データ | 説明 |
|------|-----|-------|------|
| サービス | 180px | `Service.title` | 自分が提供しているサービス名 |
| クライアント | 150px | `Client.name`, `Client.profileImage` | アバター + クライアント名 |
| ステータス | 120px | `status` | ステータスバッジ（色分け） |
| 金額/受取額 | 140px | `totalPrice`, `feeAmount` | 総額と手数料控除後の受取額を2段表示 |
| 申込日 | 100px | `createdAt` | MM/DD形式 |
| アクション | 200px | - | ステータスに応じたアクションボタン |

**金額/受取額の表示形式**:
```
¥50,000         ← 総額（totalPrice）
↓¥32,500        ← 受取額（totalPrice - feeAmount）
```

**手数料計算ロジック**:
```typescript
// feeAmount = totalPrice × (feeRate + 5%)
// 受取額 = totalPrice - feeAmount

例: totalPrice = ¥50,000、feeRate = 30%
feeAmount = ¥50,000 × (30% + 5%) = ¥50,000 × 35% = ¥17,500
受取額 = ¥50,000 - ¥17,500 = ¥32,500
```

**ステータス別アクション**:

| ステータス | アクションボタン | 動作 |
|-----------|----------------|------|
| PENDING | [承認] [拒否] [詳細] | 承認/拒否確認ダイアログ、詳細表示 |
| ACCEPTED | [詳細] [メッセージ] [キャンセル] | 詳細表示、メッセージ、キャンセル |
| PAID | [作業開始] [詳細] [メッセージ] | IN_PROGRESSへ更新、詳細表示、メッセージ |
| IN_PROGRESS | [完了マーク] [詳細] [メッセージ] | AWAITING_COMPLETIONへ更新、詳細表示、メッセージ |
| AWAITING_COMPLETION | [詳細] [メッセージ] | 詳細表示、メッセージ（利用者の承認待ち） |
| COMPLETED | [詳細] [レビュー確認] | 詳細表示、レビュー表示 |
| CANCELLED/REFUNDED | [詳細] | 詳細表示のみ |

---

#### ステータス遷移フロー詳細

**全体フロー図**:

```
PENDING（承認待ち）
    ↓ [承認]クリック              ↓ [拒否]クリック
    ↓                             ↓
ACCEPTED（承認済み）            REJECTED（拒否）
    ↓ 利用者が決済               → 終了
    ↓
PAID（決済完了）
    ↓ [作業開始]クリック
    ↓
IN_PROGRESS（作業中）
    ↓ [完了マーク]クリック
    ↓
AWAITING_COMPLETION（完了確認待ち）★新規追加
    ↓ 利用者が承認              ↓ 利用者が修正依頼
    ↓                             ↓
    ↓                        IN_PROGRESS に戻る
    ↓                        （パートナーが修正対応）
    ↓                             ↓
    ↓ ←───────────────────────────┘
    ↓
COMPLETED（完了）
    ↓ 利用者がレビュー投稿
    ↓
レビュー投稿完了 → 売上確定 → 精算処理へ
```

**各ステータスの詳細説明**:

##### 1️⃣ PENDING（承認待ち）
- **状態**: 利用者が申込を送信、パートナーの承認待ち
- **決済状況**: 未実施
- **パートナーアクション**:
  - [承認]: 確認ダイアログ表示 → ACCEPTEDへ遷移 → 利用者に通知
  - [拒否]: 理由入力フォーム表示 → REJECTEDへ遷移 → 利用者に通知
  - [詳細]: 申込詳細ページへ遷移

##### 2️⃣ ACCEPTED（承認済み）
- **状態**: パートナーが承認、利用者の決済待ち
- **決済状況**: 未実施（利用者が決済処理を実行すると自動的にPAIDへ）
- **パートナーアクション**:
  - [詳細]: 申込詳細ページへ遷移
  - [メッセージ]: 利用者とチャット（決済前の最終確認など）
  - [キャンセル]: 確認ダイアログ → CANCELLEDへ遷移 → 利用者に通知

##### 3️⃣ PAID（決済完了）
- **状態**: 利用者がStripe決済完了、パートナーの作業開始待ち
- **決済状況**: 完了（Stripe決済ID記録済み）
- **パートナーアクション**:
  - [作業開始]: 確認ダイアログ → IN_PROGRESSへ遷移 → 利用者に通知
  - [詳細]: 申込詳細ページへ遷移（決済情報確認可能）
  - [メッセージ]: 利用者と作業内容の詳細確認

##### 4️⃣ IN_PROGRESS（作業中）
- **状態**: パートナーがサービス提供実施中
- **決済状況**: 完了
- **パートナーアクション**:
  - [完了マーク]: 確認ダイアログ → AWAITING_COMPLETIONへ遷移 → 利用者に「成果物確認依頼」通知
  - [詳細]: 申込詳細ページへ遷移
  - [メッセージ]: 利用者と作業進捗を共有

##### 5️⃣ AWAITING_COMPLETION（完了確認待ち）★新規追加
- **状態**: パートナーが作業完了を報告、利用者の承認待ち
- **決済状況**: 完了
- **売上確定**: 未確定（利用者の承認後に確定）
- **パートナーアクション**:
  - [詳細]: 申込詳細ページへ遷移（「利用者の承認待ちです」と表示）
  - [メッセージ]: 利用者と最終確認のやり取り
- **利用者アクション**:
  - [完了を承認]: 成果物確認後、COMPLETEDへ遷移 → パートナー・利用者に通知 → 売上確定
  - [修正を依頼]: 修正内容入力 → IN_PROGRESSへ戻る → パートナーに通知

**利用者画面（AWAITING_COMPLETION時）**:
```
┌─────────────────────────────────────────────────┐
│ ✅ パートナーが作業完了を報告しました。          │
│    成果物を確認して、完了を承認してください。    │
│                                                  │
│ [成果物を確認]                                   │
│ [完了を承認] [修正を依頼]                        │
└─────────────────────────────────────────────────┘
```

**修正依頼フロー**:
```
[利用者が「修正を依頼」クリック]
    ↓
[修正内容入力フォーム表示]
    ↓
[送信] → Booking.status を IN_PROGRESS に戻す
    ↓
[BookingRevisionRequest レコード作成]
    ↓
[パートナーにメール/LINE通知: 「修正依頼がありました」+ 修正内容]
    ↓
[パートナーが修正対応]
    ↓
[再度「完了マーク」クリック] → AWAITING_COMPLETION へ
    ↓
[利用者が承認] → COMPLETED へ
```

##### 6️⃣ COMPLETED（完了）
- **状態**: 利用者が完了を承認、サービス完了
- **決済状況**: 完了
- **売上確定**: 確定（精算処理対象）
- **パートナーアクション**:
  - [詳細]: 申込詳細ページへ遷移
  - [レビュー確認]: レビュー投稿済みの場合は内容表示、未投稿の場合は「未投稿」表示
- **利用者アクション**:
  - [レビューを投稿]: レビュー投稿フォームへ遷移

**利用者画面（COMPLETED時）**:
```
┌─────────────────────────────────────────────────┐
│ ✅ サービスが完了しました！                      │
│    レビューを投稿してください。                  │
│                                                  │
│ [レビューを投稿]                                 │
└─────────────────────────────────────────────────┘
```

##### 7️⃣ CANCELLED / REFUNDED
- **CANCELLED**: 決済前のキャンセル
- **REFUNDED**: 決済後のキャンセル、返金処理完了
- **パートナーアクション**:
  - [詳細]: 申込詳細ページへ遷移（キャンセル理由、返金情報確認）

---

#### ページネーション
- 1ページあたり10件表示
- 総ページ数を計算して表示
- 前へ/次へボタン + ページ番号リンク

#### 空の状態（申込未受信時）
```
┌─────────────────────────────────────┐
│                                     │
│         📬                          │
│                                     │
│   まだ申込がありません               │
│                                     │
│   サービスを登録して、               │
│   申込を受け付けましょう             │
│                                     │
│   [サービスを登録]                  │
│                                     │
└─────────────────────────────────────┘
```

#### データ構造

**申込一覧API (`GET /api/sponsor/bookings`)**

**リクエストパラメータ**:
```typescript
interface GetSponsorBookingsParams {
  page?: number;
  limit?: number;
  search?: string;        // クライアント名・サービス名検索
  status?: BookingStatus | 'all';
  serviceId?: string | 'all';  // サービスフィルター
  sortBy?: 'createdAt' | 'updatedAt' | 'totalPrice';
  sortOrder?: 'asc' | 'desc';
}
```

**レスポンス**:
```typescript
interface GetSponsorBookingsResponse {
  bookings: SponsorBookingWithDetails[];
  pagination: {
    total: number;
    page: number;
    limit: number;
    totalPages: number;
  };
  stats: {
    total: number;        // 全申込数
    pending: number;      // 承認待ち（PENDING）
    inProgress: number;   // 進行中（ACCEPTED, PAID, IN_PROGRESS）
    completed: number;    // 完了（COMPLETED）
  };
  services: ServiceOption[];  // サービスフィルター用
}

interface SponsorBookingWithDetails {
  id: string;
  status: BookingStatus;
  totalPrice: number;
  feeAmount: number;
  receiveAmount: number;  // totalPrice - feeAmount
  createdAt: Date;
  updatedAt: Date;
  completedAt: Date | null;
  service: {
    id: string;
    title: string;
    feeRate: FeeRate;
  };
  client: {
    id: string;
    name: string;
    profileImage: string | null;
  };
  hasReview: boolean;
}

interface ServiceOption {
  id: string;
  title: string;
}
```

**承認API (`POST /api/sponsor/bookings/:id/accept`)**

**リクエスト**:
```typescript
interface AcceptBookingRequest {
  message?: string;  // 承認メッセージ（任意、クライアントへ送信）
}
```

**レスポンス**:
```typescript
interface AcceptBookingResponse {
  success: boolean;
  booking: {
    id: string;
    status: BookingStatus;  // ACCEPTED
  };
  message: string;  // 「申込を承認しました」
}
```

**拒否API (`POST /api/sponsor/bookings/:id/reject`)**

**リクエスト**:
```typescript
interface RejectBookingRequest {
  reason: string;  // 拒否理由（必須、最大500文字）
}
```

**レスポンス**:
```typescript
interface RejectBookingResponse {
  success: boolean;
  booking: {
    id: string;
    status: BookingStatus;  // CANCELLED
  };
  message: string;  // 「申込を拒否しました」
}
```

**作業開始API (`POST /api/sponsor/bookings/:id/start`)**

**レスポンス**:
```typescript
interface StartBookingResponse {
  success: boolean;
  booking: {
    id: string;
    status: BookingStatus;  // IN_PROGRESS
  };
  message: string;  // 「作業を開始しました」
}
```

**完了マークAPI (`POST /api/sponsor/bookings/:id/complete`)**

**リクエスト**:
```typescript
interface CompleteBookingRequest {
  completionNote?: string;  // 完了コメント（任意）
}
```

**レスポンス**:
```typescript
interface CompleteBookingResponse {
  success: boolean;
  booking: {
    id: string;
    status: BookingStatus;  // COMPLETED
    completedAt: Date;
  };
  message: string;  // 「サービスを完了としてマークしました」
}
```

#### UIコンポーネント

**使用するshadcn/uiコンポーネント**:
- `Card`: 統計カード
- `Button`: アクションボタン
- `Input`: 検索ボックス
- `Select`: フィルター、並び替えドロップダウン
- `Table`: 申込一覧
- `Badge`: ステータス表示
- `AlertDialog`: 承認/拒否/完了確認ダイアログ
- `Textarea`: 拒否理由、完了コメント入力
- `Toast`: 操作完了通知
- `Skeleton`: ローディング状態
- `Avatar`: クライアントアバター

#### インタラクション仕様

1. **検索**:
   - 入力時にdebounce（300ms）
   - 検索中はテーブルにSkeletonを表示
   - 結果0件の場合は空の状態メッセージ表示

2. **フィルター・並び替え**:
   - 変更時に即座にAPIリクエスト
   - ローディング中はテーブルにSkeletonを表示

3. **承認**:
   - クリック → 確認ダイアログ表示
   - ダイアログ内容: 「この申込を承認しますか？」+ メッセージ入力欄（任意）
   - 確認 → APIリクエスト
   - 成功: トースト通知「申込を承認しました。クライアントに通知を送信しました」+ テーブル再読み込み

4. **拒否**:
   - クリック → 確認ダイアログ表示
   - ダイアログ内容: 「この申込を拒否しますか？」+ 拒否理由入力欄（必須）
   - 確認 → APIリクエスト
   - 成功: トースト通知「申込を拒否しました」+ テーブル再読み込み
   - バリデーション: 拒否理由が未入力の場合はエラー表示

5. **作業開始**:
   - クリック → 確認ダイアログ表示
   - ダイアログ内容: 「作業を開始しますか？」
   - 確認 → APIリクエスト → ステータスをIN_PROGRESSに更新
   - 成功: トースト通知「作業を開始しました」

6. **完了マーク**:
   - クリック → 確認ダイアログ表示
   - ダイアログ内容: 「このサービスを完了としてマークしますか？」+ 完了コメント入力欄（任意）
   - 確認 → APIリクエスト → ステータスをCOMPLETEDに更新
   - 成功: トースト通知「サービスを完了としてマークしました。クライアントにレビュー依頼を送信しました」

7. **詳細表示**:
   - `/sponsor/bookings/:id` へ遷移
   - 申込詳細画面表示（5.10参照）

#### レスポンシブ対応

**モバイル（〜768px）**:
- テーブルをカード形式に変換
- 各申込をカードとして縦積み表示
- カード内容: サービス名、クライアント名、ステータス、金額/受取額、アクションボタン
- フィルター・並び替えはシート（Sheet）で開閉

**タブレット（768px〜1024px）**:
- テーブル表示維持
- 金額/受取額を1行にまとめて表示（¥50,000 / ¥32,500）

**デスクトップ（1024px〜）**:
- 全列表示

---

### 5.10 申込詳細画面（利用者・パートナー共通）

```
┌─────────────────────────────────────────────────────────────┐
│ HATAMO Logo              Search Box               [Profile] │
├─────────────────────────────────────────────────────────────┤
│ Home > 申込 > Webサイト制作の申込                            │
├─────────────────────────────────────────────────────────────┤
